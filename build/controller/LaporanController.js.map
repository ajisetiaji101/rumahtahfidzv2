{"version":3,"file":"LaporanController.js","names":["_db","_interopRequireDefault","require","obj","__esModule","default","_defineProperty","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","uuid","LaporanController","exports","req","console","log","userId","pondokId","masterpondokId","query","respon","knex","raw","then","e","data","Date","socket","remoteAddress","method","status","json","error","message"],"sources":["../../server/controller/LaporanController.js"],"sourcesContent":["import knex from \"../config/db.js\";\r\nconst uuid = require(\"uuid\");\r\n\r\nexport default class LaporanController {\r\n  static getHafalanSantri = async (req, res) => {\r\n    try {\r\n      console.log(\"===================== GET HAFALAN =======================\");\r\n\r\n      const { userId, pondokId, masterpondokId } = req.query;\r\n\r\n      const respon = await knex\r\n        .raw(\r\n          `call report_hafalan_santri_getall('${userId}','${pondokId}','${masterpondokId}')`\r\n        )\r\n        .then((e) => e[0][0]);\r\n\r\n      const data = respon;\r\n\r\n      console.log(\r\n        `${new Date()}  IP :  ${req.socket.remoteAddress}  METHOD:  ${\r\n          req.method\r\n        } `\r\n      );\r\n      console.log(\r\n        \"===================== END GET HAFALAN IQRO SANTRI =======================\"\r\n      );\r\n\r\n      return res.status(200).json({ data });\r\n    } catch (error) {\r\n      console.log(\r\n        `${new Date()}  IP :  ${req.socket.remoteAddress}  METHOD:  ${\r\n          req.method\r\n        }  ERROR: ${error.message} `\r\n      );\r\n      console.log(\r\n        \"===================== END GET HAFALAN IQRO SANTRI =======================\"\r\n      );\r\n\r\n      return res.status(400).json({ data: error.message });\r\n    }\r\n  };\r\n\r\n  static getHafalanGuru = async (req, res) => {\r\n    try {\r\n      console.log(\"===================== GET HAFALAN =======================\");\r\n\r\n      const { pondokId, masterpondokId } = req.query;\r\n\r\n      const respon = await knex\r\n        .raw(\r\n          `call report_hafalan_guru_getall('${pondokId}','${masterpondokId}')`\r\n        )\r\n        .then((e) => e[0][0]);\r\n\r\n      const data = respon;\r\n\r\n      console.log(\r\n        `${new Date()}  IP :  ${req.socket.remoteAddress}  METHOD:  ${\r\n          req.method\r\n        } `\r\n      );\r\n      console.log(\r\n        \"===================== END GET HAFALAN GURU =======================\"\r\n      );\r\n\r\n      return res.status(200).json({ data });\r\n    } catch (error) {\r\n      console.log(\r\n        `${new Date()}  IP :  ${req.socket.remoteAddress}  METHOD:  ${\r\n          req.method\r\n        }  ERROR: ${error.message} `\r\n      );\r\n      console.log(\r\n        \"===================== END GET HAFALAN GURU =======================\"\r\n      );\r\n\r\n      return res.status(400).json({ data: error.message });\r\n    }\r\n  };\r\n}\r\n"],"mappings":"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"}